<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Weatherly</title>
<link rel="stylesheet" href="index.css">
</head>
<body>
<div class="app-container">
  <!-- Header -->
  <header class="header">
    <div class="header-left">
      <span class="logo">‚òÅÔ∏è</span>
      <h1>Weatherly</h1>
    </div>
    <div class="header-right">
      <div id="userInfo" class="user-info">
        <div id="userName">User Name</div>
        <div id="userEmail">user@example.com</div>
      </div>
      <button id="profileBtn" class="btn">Profile</button>
      <button id="logoutBtn" class="btn">Logout</button>
    </div>
  </header>

  <!-- Navigation -->
  <nav id="navBar" class="nav-bar">
    <button class="nav-btn" data-view="dashboard">Dashboard</button>
    <button class="nav-btn" data-view="search">Search</button>
    <button class="nav-btn" data-view="past">Past Weather</button>
    <button class="nav-btn" data-view="alerts">Alerts</button>
    <button class="nav-btn" data-view="settings">Settings</button>
    <button class="nav-btn" data-view="help">Help</button>
  </nav>

  <!-- Main Content -->
  <main id="mainContent" class="main-content">
    <!-- Dynamic content loaded here -->
  </main>

  <!-- Bottom nav for mobile -->
  <nav class="bottom-nav">
    <button class="nav-btn" data-view="dashboard">üè†</button>
    <button class="nav-btn" data-view="search">üìç</button>
    <button class="nav-btn" data-view="past">üìä</button>
    <button class="nav-btn" data-view="alerts">‚ö†Ô∏è</button>
    <button class="nav-btn" data-view="settings">‚öôÔ∏è</button>
    <button class="nav-btn" data-view="help">‚ùì</button>
  </nav>
</div>

<script>
/* State */
let state = {
  isAuthenticated: false,
  currentUser: null,
  currentView: 'dashboard',
  savedLocations: [],
  selectedLocation: null
};

/* Sample Data */
const defaultUser = {id:'1', name:'John Doe', email:'john@example.com'};
const defaultLocations = [
  {id:'1', name:'New York', country:'USA', temp:72, condition:'Partly Cloudy', high:75, low:65, humidity:65, windSpeed:12, icon:'‚õÖ'},
  {id:'2', name:'London', country:'UK', temp:61, condition:'Rainy', high:64, low:58, humidity:85, windSpeed:15, icon:'üåßÔ∏è'},
  {id:'3', name:'Tokyo', country:'Japan', temp:68, condition:'Sunny', high:73, low:62, humidity:55, windSpeed:8, icon:'‚òÄÔ∏è'}
];

/* DOM Elements */
const mainContent = document.getElementById('mainContent');
const userName = document.getElementById('userName');
const userEmail = document.getElementById('userEmail');
const profileBtn = document.getElementById('profileBtn');
const logoutBtn = document.getElementById('logoutBtn');
const navButtons = document.querySelectorAll('.nav-btn');

/* Functions */
function loginUser(user) {
  state.isAuthenticated = true;
  state.currentUser = user;
  state.savedLocations = defaultLocations;
  renderApp();
}

function logoutUser() {
  state.isAuthenticated = false;
  state.currentUser = null;
  state.savedLocations = [];
  state.currentView = 'dashboard';
  renderApp();
}

function setView(view) {
  state.currentView = view;
  renderMainContent();
}

function renderApp() {
  if(!state.isAuthenticated){
    mainContent.innerHTML = `
      <div class="login-page">
        <h2>Login</h2>
        <button id="loginBtn" class="btn">Login as John Doe</button>
      </div>
    `;
    document.getElementById('loginBtn').addEventListener('click', ()=>loginUser(defaultUser));
    return;
  }

  // Update header info
  userName.textContent = state.currentUser.name;
  userEmail.textContent = state.currentUser.email;

  renderMainContent();
}

function renderMainContent() {
  switch(state.currentView){
    case 'dashboard':
      mainContent.innerHTML = `
        <h2>Dashboard</h2>
        <div class="locations">
          ${state.savedLocations.map(loc=>`
            <div class="location-card">
              <span class="loc-icon">${loc.icon}</span>
              <span class="loc-name">${loc.name}, ${loc.country}</span>
              <span class="loc-temp">${loc.temp}¬∞F</span>
              <button class="btn-small" data-id="${loc.id}">View</button>
            </div>
          `).join('')}
        </div>
      `;
      document.querySelectorAll('.btn-small').forEach(btn=>{
        btn.addEventListener('click', e=>{
          const id = e.target.dataset.id;
          state.selectedLocation = state.savedLocations.find(loc=>loc.id===id);
          state.currentView='weekly';
          renderMainContent();
        });
      });
      break;

    case 'weekly':
      mainContent.innerHTML = `
        <h2>Weekly Forecast for ${state.selectedLocation.name}</h2>
        <button class="btn" id="backDashboardBtn">‚Üê Back to Dashboard</button>
        <div class="forecast">[Weekly forecast data here]</div>
      `;
      document.getElementById('backDashboardBtn').addEventListener('click', ()=>{
        state.currentView='dashboard';
        renderMainContent();
      });
      break;

    case 'search':
      mainContent.innerHTML = `<h2>Search Locations</h2><p>Search page placeholder</p>`;
      break;

    case 'past':
      mainContent.innerHTML = `<h2>Past Weather</h2><p>Past weather data placeholder</p>`;
      break;

    case 'alerts':
      mainContent.innerHTML = `<h2>Weather Alerts</h2><p>Alerts placeholder</p>`;
      break;

    case 'settings':
      mainContent.innerHTML = `<h2>Settings</h2><p>Settings placeholder</p>`;
      break;

    case 'help':
      mainContent.innerHTML = `<h2>Help & Feedback</h2><p>Help placeholder</p>`;
      break;

    case 'profile':
      mainContent.innerHTML = `
        <h2>User Profile</h2>
        <p>Name: ${state.currentUser.name}</p>
        <p>Email: ${state.currentUser.email}</p>
      `;
      break;
  }
}

/* Event Listeners */
profileBtn.addEventListener('click', ()=>setView('profile'));
logoutBtn.addEventListener('click', logoutUser);
navButtons.forEach(btn=>{
  btn.addEventListener('click', e=>setView(e.currentTarget.dataset.view));
});

/* Initial Render */
renderApp();
</script>
</body>
</html>
