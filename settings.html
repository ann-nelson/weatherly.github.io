<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Weatherly - Settings</title>
<link rel="stylesheet" href="stylesheet/global.css">
<link rel="stylesheet" href="stylesheet/settings.css">
</head>
<body>

<!-- Top Navigation -->
<header class="top-nav">
  <div class="logo">
    <span class="logo-icon">â˜ï¸</span>
    <h1 class="title">Weatherly</h1>
  </div>
  <nav class="nav-links">
    <a href="saved.html">Dashboard</a>
    <a href="search.html">Search</a>
    <a href="pastWeather.html">Past Weather</a>
    <a href="weatherAlerts.html">Alerts</a>
    <a href="settings.html" class="active">Settings</a>
    <a href="help.html">Help</a>
  </nav>
  <div class="user-section">
    <button onclick="window.location.href='profile.html'" class="profile-btn">Demo User</button>
    <button onclick="window.location.href='login.html'" class="logout-btn">Logout</button>
  </div>
</header>

<main class="main-container">

  <div class="section-header">
    <h2>Settings</h2>
    <p>Adjust your preferences for Weatherly alerts and interface.</p>
  </div>

  <div class="alerts-container">

    <!-- Account Card -->
    <div class="alert-card alert-info">
      <div class="alert-card-content">
        <div class="alert-icon alert-icon-info">ğŸ‘¤</div>
        <div class="alert-main">
          <div class="alert-header">
            <h3 class="alert-title">Account</h3>
          </div>
          <p class="alert-description">Username: Demo User</p>
          <button class="btn btn-primary" onclick="window.location.href='profile.html'">Edit Profile</button>
        </div>
      </div>
    </div>

    <!-- Units Card -->
    <div class="alert-card alert-info">
      <div class="alert-card-content">
        <div class="alert-icon alert-icon-info">ğŸŒ¡ï¸</div>
        <div class="alert-main">
          <div class="alert-header">
            <h3 class="alert-title">Units</h3>
          </div>
          <div class="settings-tags">
            <label><input type="radio" name="unit-temp" id="unit-f"> Fahrenheit (Â°F)</label>
            <label><input type="radio" name="unit-temp" id="unit-c"> Celsius (Â°C)</label>
          </div>
        </div>
      </div>
    </div>

    <!-- Notifications Card -->
    <div class="alert-card alert-info">
      <div class="alert-card-content">
        <div class="alert-icon alert-icon-info">ğŸ””</div>
        <div class="alert-main">
          <div class="alert-header">
            <h3 class="alert-title">Notifications</h3>
          </div>
          <div class="settings-tags">
            <label><input type="checkbox" id="set-severe"> Severe Weather</label>
            <label><input type="checkbox" id="set-temp"> Temperature Alerts</label>
            <label><input type="checkbox" id="set-precip"> Precipitation Alerts</label>
            <label><input type="checkbox" id="set-air"> Air Quality Alerts</label>
          </div>
        </div>
      </div>
    </div>

    <!-- Accessibility Card -->
    <div class="alert-card alert-info">
      <div class="alert-card-content">
        <div class="alert-icon alert-icon-info">â™¿</div>
        <div class="alert-main">
          <div class="alert-header">
            <h3 class="alert-title">Accessibility</h3>
          </div>
          <div class="settings-tags">
            <label><input type="checkbox" id="a11y-high-contrast"> High Contrast Mode</label>
            <label><input type="checkbox" id="a11y-large-text"> Large Text</label>
            <label><input type="checkbox" id="a11y-animations"> Reduce Motion</label>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div class="button-group">
    <button class="btn btn-primary" id="saveSettings">ğŸ’¾ Save</button>
    <button class="btn btn-outline" id="cancelSettings">âŒ Cancel</button>
  </div>

</main>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const body = document.body;
  const checkboxes = ["set-severe","set-temp","set-precip","set-air","a11y-high-contrast","a11y-large-text","a11y-animations"];
  const savedPrefs = JSON.parse(localStorage.getItem("userSettings")) || {};
  
  if(savedPrefs.unit==="C") document.getElementById("unit-c").checked = true;
  else document.getElementById("unit-f").checked = true;

  checkboxes.forEach(id => document.getElementById(id).checked = savedPrefs[id]||false);

  function applyAccessibility(settings){
    body.classList.toggle("large-text", settings["a11y-large-text"]);
    body.classList.toggle("high-contrast", settings["a11y-high-contrast"]);
    body.classList.toggle("reduce-motion", settings["a11y-animations"]);
  }
  applyAccessibility(savedPrefs);
  let tempPrefs = JSON.parse(JSON.stringify(savedPrefs));

  document.getElementById("saveSettings").addEventListener("click", ()=> {
    const updated = {unit: document.getElementById("unit-c").checked?"C":"F"};
    checkboxes.forEach(id=>updated[id]=document.getElementById(id).checked);
    localStorage.setItem("userSettings", JSON.stringify(updated));
    tempPrefs = JSON.parse(JSON.stringify(updated));
    applyAccessibility(updated);
    alert("Settings saved!");
  });

  document.getElementById("cancelSettings").addEventListener("click", ()=> {
    if(tempPrefs.unit==="C") document.getElementById("unit-c").checked=true;
    else document.getElementById("unit-f").checked=true;
    checkboxes.forEach(id=>document.getElementById(id).checked=tempPrefs[id]||false);
    applyAccessibility(tempPrefs);
    alert("Changes canceled!");
  });
});
</script>
<script src="accessibility.js"></script>
</body>
</html>